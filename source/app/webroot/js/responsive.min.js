!function(e,i){"function"==typeof define&&define.amd?define(["jquery","bootstrap","sidebarModal","mooCoreMenu","mooNiceSelect"],i):"object"==typeof exports?module.exports=i(require("jquery")):e.mooResponsive=i(e.jQuery)}(this,function(t){function o(){var e=window,i="inner";return"innerWidth"in window||(i="client",e=document.documentElement||document.body),e[i+"Width"]}function n(){t("#leftnav").hasClass("in")&&o()<992||t("#leftnav").sidebarModal("hide"),t("#right").hasClass("in")&&o()<992||t("#right").sidebarModal("hide"),o()<992?(t("#leftnav").hasClass("in")||t("#leftnav").addClass("modal-mobile fade").css("display","none"),t("#right").hasClass("in")||t("#right").addClass("modal-mobile fade").css("display","none")):(t("#leftnav").removeClass("modal-mobile fade").css("display","block"),t("#right").removeClass("modal-mobile fade").css("display","block"))}function a(){o()<992?t("#header_mobi").css("display","block"):(t("#header_mobi").css("display","none"),t(".notify_group").css("display","block"));var i=t(window).scrollTop(),n=t("body");t(window).scroll(function(){var e;o()<992&&!n.hasClass("openNotify")&&(e=t(window).scrollTop(),i<e&&0<i?t(".sl-rsp-modal").hasClass("in")||t("body").addClass("faceOutEffect"):t(".sl-rsp-modal").hasClass("in")||t("body").removeClass("faceOutEffect"),i=e)})}function s(){0<t(".PE").size()&&t(".PE").each(function(){var e=t(this).parent(),i=e.width(),n=.667*i,o=.332*i;e.find(".ej").css({width:n,height:n}),e.find(".sp").css({width:o,height:n/2}),e.find(".sp.eq").css({width:o,height:n/2-1});n=.749*i,i*=.249;e.find(".ej1").css({width:n,height:n}),e.find(".sp1").css({width:i,height:n/3}),e.find(".sp1.eq1").css({width:i,height:n/3-2}),t("body").trigger("afterArragePhotoFeed",[{element:t(this)}])})}function l(){0<t(".single_img").size()&&t(".single_img").each(function(){var e,i,n=t(this);t("<img/>").attr("src",t(n).attr("src")).load(function(){e=this.width,i=this.height,e<=i?t(n).addClass("verticalImage"):t(n).addClass("horizionImage"),t("body").trigger("afterCheckDimensionSingleImage",[{element:t(n)}])})})}var d,r,c=function(){t("#mainMenuSection").addClass("mobile-view"),t("html").addClass("mobile-menu-open")},m=function(){t("#mainMenuSection").removeClass("mobile-view"),t("html").removeClass("mobile-menu-open"),t("#main_menu").find("li.mobile-show-menu-child").each(function(e){t(this).css("margin-left",""),t(this).removeClass("mobile-show-menu-child")}),t("#main_menu").find("li.mobile-hide-menu-child").each(function(e){t(this).removeClass("mobile-hide-menu-child")}),t("#main_menu").find(".main-menu-non-overflow").each(function(e){t(this).removeClass(".main-menu-non-overflow")})},u=function(){992<o()&&(56<t(window).scrollTop()?t("body").addClass("documentScrolling"):t("body").removeClass("documentScrolling"))};return{init:function(){var e,i;t(document).ready(function(){t("input,textarea").bind("focus",function(){t("body").addClass("keyboard")})}),t(document).ready(function(){t("input,textarea").bind("blur",function(){t("body").removeClass("keyboard")})}),n(),0<(i=t("#mainMenuSection").find(t(".core-menu-link.active")[0])).length&&(e=i.find(".core-menu-icon").text(),i=i.find(".core-menu-text").text(),""==e&&(e="menu"),t("#mainMenuMobileToggle").find(".main-menu-toggle-text").text(i),t("#mainMenuMobileToggle").find(".main-menu-toggle-icon").text(e)),t("#mainMenuMobileToggle").click(function(e){e.preventDefault(),o()<992&&c()}),t("#mainMenuOverview, #mainMenuClose").click(function(e){e.preventDefault(),o()<992&&m()}),t("#main_menu").find("li.hasChild .main-menu-arrow, li.hasChild .core-menu-header").each(function(e){var i=t(this).parent();t(this).click(function(e){e.preventDefault(),o()<992&&(i.addClass("mobile-show-menu-child"),i.parent().find("> li:not(.mobile-show-menu-child)").addClass("mobile-hide-menu-child"),i.parent().addClass("main-menu-non-overflow"),i.animate({"margin-left":"0"},500,function(){}))})}),t("#main_menu").find("li.hasChild .main-sub-menu-back").each(function(e){var i=t(this).parent();t(this).click(function(e){e.preventDefault(),o()<992&&i.animate({"margin-left":"100%"},400,function(){i.removeClass("mobile-show-menu-child").css("margin-left",""),i.parent().find("> li.mobile-hide-menu-child").removeClass("mobile-hide-menu-child"),i.parent().removeClass("main-menu-non-overflow")})})}),t(window).resize(function(){992<=o()&&m()}),a(),u(),t(window).scroll(function(){u()}),t("body").trigger("afterResponsiveFullHeaderScroll",[{}]),s(),l(),t("#leftnav input").bind("keypress",function(e){13==(e.keyCode||e.which)&&t("#leftnav").sidebarModal("hide")}),t(".menu-list-toggle").CategoryMenuToggle(),t(".modal").on("show.bs.modal",function(){(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&t("body").addClass("modal-iphone")}),d=t(document).width(),r=t(document).height(),t(window).resize(function(){n(),t(document).width()!=d&&t(document).height()!=r&&(a(),s(),d=t(document).width(),r=t(document).height())}),t(document).on("hidden.bs.modal",function(e){t(e.target).removeData("bs.modal")}),t("#global-search").focus(function(){t(this).addClass("active")}).blur(function(){t(this).removeClass("active")}),o()<992&&(0<t(".menu_top_list").size()&&(t(".menu_top_list a").unbind("click"),t(".menu_top_list a").click(function(){t("#leftnav").sidebarModal("hide"),t("#right").sidebarModal("hide"),t("body").scrollTop(0)})),0<t("#global-search-filters").size()&&(t("#global-search-filters a").unbind("click"),t("#global-search-filters a").click(function(){t("#leftnav").sidebarModal("hide"),t("#right").sidebarModal("hide"),t("body").scrollTop(0)}))),0<window.navigator.userAgent.indexOf("MSIE ")&&t(".upload-section span").css("display","none"),t(document).on("click",".dropdown-menu",function(e){t(this).hasClass("keep_open")&&e.stopPropagation()}),o(),t("select.core-select").niceSelect(),t(".sidebar-modal").on("show.bs.sidebarModal",function(e){var i=t(this),n=i.attr("id"),o="";"leftnav"==n?o="left":"right"==n&&(o="right"),t(document).trigger("afterSidebarModalShow",[{element:i,position:o}])}),t(".sidebar-modal").on("hide.bs.sidebarModal",function(e){var i=t(this),n=i.attr("id"),o="";"leftnav"==n?o="left":"right"==n&&(o="right"),t(document).trigger("afterSidebarModalHide",[{element:i,position:o}])})},initFeedImage:function(){s(),l()},arragePhotoFeed:function(){s()},initGridListView:function(e){var i,n;i=t(e=e),n=t(i.attr("data-target")),0<i.length&&(e=i.find(".gl-item.active:first").attr("data-type"),n.removeClass("grid-view").removeClass("list-view"),"grid"==e?n.addClass("grid-view"):"list"==e&&n.addClass("list-view"),i.find(".gl-item").unbind("click").bind("click",function(e){e.preventDefault(),e.stopPropagation();e=t(this).attr("data-type");i.find(".active").removeClass("active"),t(this).addClass("active"),n.removeClass("grid-view").removeClass("list-view"),"grid"==e?n.addClass("grid-view"):"list"==e&&n.addClass("list-view")}))},initLoginPopup:function(){t(".dropdown-popup-toggle").click(function(e){e.preventDefault(),e.stopPropagation(),t(this).parent().toggleClass("open")}),t(document).on("click",function(e){1!=t(e.target).parents(".login-popup-group").length&&t(".login-popup-group").removeClass("open")})}}});