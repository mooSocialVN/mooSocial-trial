!function(f){var e,t,i,r,a,l,h,s,n=(e={asStickyBrowseMenuFor:""},t=f("#header"),i=!1,r=f("body"),a=f('<div id="CoreHorizontalMenuOverlay" class="core_horizontal_menu_overlay" style="display: none;"></div>'),l=null,h='<div class="horizontal-menu-close"><span class="horizontal-menu-close-icon material-icons">expand_less</span></div>',s=function(e,n,o,t){var i,r=0;e.find("> li").each(function(e){r+=f(this).outerWidth()}),n<r&&(0<(i=t.find("> li").first()).length?o.prev().insertBefore(i):o.prev().appendTo(t),s(e,n,o,t))},{init:function(s){return s=f.extend({},e,s||{}),f("body").append(a),this.each(function(){var i=f(this),e=!1;""!=s.asStickyBrowseMenuFor&&0!=f(s.asStickyBrowseMenuFor).length&&(e=!0);var n,o,t,r=i.find(".core-horizontal-more"),a=i.find(".core-horizontal-dropdown");i.find("> li").each(function(e){f(this).hasClass("core-horizontal-more")||f(this).attr("stt",e)}),1==e?c(i,r,a):(c(n=i,o=r,t=a),f(window).resize(function(){p(n,o,t)})),f(this).find("a.horizontal-menu-header").click(function(e){e.preventDefault(),f(window).width()<992&&((e=f(this).parent()).parent().hasClass("core-horizontal-menu")?null==l?(l=f(this)[0],0==e.find("> .horizontal-menu-close").length&&e.append(h),u(i,e)):l==f(this)[0]?(e.removeClass("horizontal-menu-open"),d(i)):(l=f(this)[0],i.find(".horizontal-menu-open").removeClass("horizontal-menu-open"),i.find(".horizontal-menu-close").remove(),0==e.find("> .horizontal-menu-close").length&&e.append(h),u(i,e)):e.hasClass("horizontal-menu-open")?(e.removeClass("horizontal-menu-open"),e.find(".horizontal-menu-open").removeClass("horizontal-menu-open")):e.addClass("horizontal-menu-open"))}),f(document).click(function(e){f(window).width()<992&&(i.is(e.target)||0!==i.has(e.target).length?(f(e.target).hasClass("horizontal-menu-link")?f(e.target):f(e.target).parent(".horizontal-menu-link")).hasClass("horizontal-menu-header")||d(i):0!=i.find(".horizontal-menu-open").length&&(i.find(".horizontal-menu-open").removeClass("horizontal-menu-open"),d(i)))}),f(this).hasClass("horizontal-menu-waiting")&&f(this).removeClass("horizontal-menu-waiting"),992<=f(window).width()&&r.hover(function(){f(this).addClass("core-horizontal-more-show");var o,e,o=(t=(o=a).offset().top,e=t+o.outerHeight(),!((o=f(window).scrollTop()+f(window).height())<e)||o-t);if(1==o)a.removeClass("horizontal-sub-x");else{a.addClass("horizontal-sub-x");let e=a.find("> li");var t=e.outerHeight(!0),t=Math.ceil(o/t)-1;let n=Math.ceil(e.length/t);7<n&&(n=7);i.width();t=200*n;a.css("width",t)}},function(){f(this).removeClass("core-horizontal-more-show"),a.removeClass("horizontal-sub-x"),a.css("width","")})})},reset:function(){return this.each(function(){var e=f(this),n=e.find(".core-horizontal-more"),o=n.find(".core-horizontal-dropdown");p(e,n,o)})},close:function(){return this.each(function(){var e=f(this);d(e)})}});function c(e,n,o){var t,i=e.innerWidth(),r=0;e.find("> li:not(.core-horizontal-more)").each(function(e){r+=f(this).outerWidth()}),i<r&&(0<(t=o.find("> li").first()).length?n.prev().insertBefore(t):n.prev().appendTo(o)),0<o.find("> li").length?n.removeClass("hidden"):n.addClass("hidden"),s(e,i,n,o),e.find("li.hasChild").each(function(){0<f(this).find(".horizontal-menu-sub").find("> li.current").length?f(this).addClass("current"):f(this).removeClass("current")})}function u(e,n){i=!0;var o=e.offset().top-f(window).scrollTop();t.outerHeight(!0)<o?f("html, body").animate({scrollTop:e.offset().top},100,"swing",function(){var e=n.offset().top-f(window).scrollTop()+n.innerHeight();n.find("> .horizontal-menu-sub").css({top:e+"px"}),a.show(),r.addClass("core_horizontal_menu_open"),n.addClass("horizontal-menu-open")}):(e=n.offset().top-f(window).scrollTop()+n.innerHeight(),n.find("> .horizontal-menu-sub").css({top:e+"px"}),a.show(),r.addClass("core_horizontal_menu_open"),n.addClass("horizontal-menu-open"))}function d(e){i&&(i=!1,l=null,a.hide(),r.removeClass("core_horizontal_menu_open"),e.find(".horizontal-menu-open").removeClass("horizontal-menu-open"),e.find(".horizontal-menu-close").remove(),e.find(".horizontal-menu-sub").css("top",""))}function p(e,n,o){var t;d(e),e=e,t=n,(o=o).find("> li").each(function(e){f(this).insertBefore(t)}),c(e,t,o)}var w,o=(w={asHorizontalMenuFor:""},{init:function(o){return o=f.extend({},w,o||{}),this.each(function(){var e=f(this),n=!1;""!=o.asHorizontalMenuFor&&0!=f(o.asHorizontalMenuFor).length&&(n=!0),m(e),n&&f(o.asHorizontalMenuFor).HorizontalMenuReset(),f(window).scroll(function(){m(e),n&&f(o.asHorizontalMenuFor).HorizontalMenuReset()}),f(window).resize(function(){m(e),n&&f(o.asHorizontalMenuFor).HorizontalMenuReset()})})}});function m(e){var n=e.find(".horizontal-action"),o=e.find(".horizontal-content");n.is(":hidden")?o.css("max-width","100%"):(n=e.width()-n.outerWidth(),o.css("max-width",n+"px"))}var v,z,g,C=(z=!(v={asCoreBrowseMenuFor:"",asHorizontalMenuFor:""}),g=function(e){f(e).prev().css("max-height","");var n=f('<a href="javascript:void(0)" class="show-more">'+f(e).prev().data("more-text")+"</a>");f(e).replaceWith(n),n.click(function(e){M(this)}),f("body").trigger("afterShowMoreServerJSCallback",[])},{init:function(d){return d=f.extend({},v,d||{}),this.each(function(){f(this);var o=!1;""!=d.asCoreBrowseMenuFor&&0!=f(d.asCoreBrowseMenuFor).length&&(o=!0);var u=!1;""!=d.asHorizontalMenuFor&&0!=f(d.asHorizontalMenuFor).length&&(u=!0);var e,n=!1;null!=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:e[1]||0}("core-link-active")&&(e=window.location.href.replace(new RegExp("[?&]core-link-active=([^&#]*)"),""),window.history.pushState({},"",e),n=!0);var t=f(location).attr("hash"),i=null,r=!1;f(this).find("a.core-menu-ajax").each(function(){var e=f(this).attr("data-anchor"),n=f(this).attr("autoload");f(this).click(function(e){e.preventDefault(),f(this).spin("tiny"),f(o?d.asCoreBrowseMenuFor:this).find(".current").removeClass("current"),f(this).parent().addClass("current"),f(this).parents("li.hasChild").addClass("current");var h=f(this).attr("rel");null==h&&(h="list-content");var c=f(this);f("#"+h).load(f(this).attr("data-url")+"?"+f.now(),function(e){var n,o,t,i,r,a,s,l;try{f.parseJSON(e).data}catch(e){0}c.spin(!1),H(c),f(".truncate").each(function(){var e;145<=parseInt(f(this).css("height"))&&(e=f('<a href="javascript:void(0)" class="show-more">'+f(this).data("more-text")+"</a>"),f(this).after(e),e.click(function(e){M(this)}))}),window.history.pushState({},"",c.attr("href")),f(window).width()<992&&(f("#leftnav").sidebarModal("hide"),f("#right").sidebarModal("hide"),f("html,body").scrollTop(0)),(l=f("#"+h),n=f(window).scrollTop(),o=n,t=f(window).width(),i=n+f(window).height(),r=l.offset().top,a=l.offset().left,s=l.offset().left+l.outerWidth(),n=l.offset().top+l.outerHeight(),(l={}).top=!(r<o),l.bottom=!(i<n),l.left=!(a<0),l.right=!(t<s),l.any=!!(l.top&&l.left&&l.bottom&&l.right),l).top||(l=f("#"+h).offset().top-f("#header").outerHeight(!0),0<f("#stickyBrowseMenu").length&&(l-=f("#stickyBrowseMenu").outerHeight(!0)),0<f("#profile-scroll").length&&(l-=f("#profile-scroll").find(".profile-scroll-main").outerHeight(!0)),f("html,body").scrollTop(l)),u&&f(d.asHorizontalMenuFor).HorizontalMenuClose(),f("body").trigger("afterAjaxCoreBrowseMenuCallback",[{element_menu:c}])})}),"true"==n&&0==r&&(r=!0,i=f(this)),t==e&&(r=!0,i=f(this))}),0==n&&null!=i&&0==z&&(z=!0,i.trigger("click"))})},spinStart:function(n){return void 0!==n&&""!=n||(n="#browse_all"),this.each(function(){f(this);f(this).find(".current").removeClass("current");var e=f(this).find(n);e.addClass("current").spin("tiny"),H(e.find("> .horizontal-menu-link"))})},spinStop:function(e){return void 0!==e&&""!=e||(e="#browse_all"),this.each(function(){f(this);f(this).find(e).spin(!1)})}});function M(e){f(e).prev().css("max-height","none");var n=f('<a href="javascript:void(0)" class="show-more">'+f(e).prev().data("less-text")+"</a>");f(e).replaceWith(n),n.click(function(e){g(this)}),f("body").trigger("afterShowMoreServerJSCallback",[])}function H(e){var n=e.attr("header-title");0!=(e=f(document).find("#PageHeaderTitle")).length&&(void 0!==n&&""!=n?e.html(n):e.html(e.attr("header-title")))}var y,b,S,x,k,F=(y={},{init:function(e){return e=f.extend({},y,e||{}),this.each(function(){var o=f(this),t=o.find(".browse-dropdown_label");f("body").on("afterAjaxCoreBrowseMenuCallback",function(e,n){0<o.find(n.element_menu).length?t.html(n.element_menu.attr("header-title")):t.html(t.attr("data-title"))}),f("body").on("afterAjaxSearchServerJSCallback",function(e,n){t.html(t.attr("data-title"))})})}}),_=(b={},{init:function(e){return e=f.extend({},b,e||{}),this.each(function(){f(this);f(this).find(".menu-list-header").each(function(){f(this).click(function(e){e.preventDefault(),f(this).parent().toggleClass("open")})})})}}),B=(S={asHorizontalMenuFor:""},x=f("#header"),k=0,{init:function(s){return s=f.extend({},S,s||{}),this.each(function(){var e,o,n,t,i,r,a;992<=f(window).width()&&(e=f(this),o=e.find(".profile-scroll-main"),n=e.find(".profile-scroll-jump"),t=e.find(".profile-menu"),""!=s.asHorizontalMenuFor&&f(s.asHorizontalMenuFor).length,k=t.offset().top,i=f(this),r=o,a=n,i.addClass("profile-scroll"),T(r,a),j(f(this),o),f(window).scroll(function(){j(e,o)}),f(window).resize(function(){k=t.offset().top,T(o,n)}),f("body").on("afterResponsiveFullHeaderScroll",function(e,n){j(f(this),o)}))})},reset:function(){return this.each(function(){var e,n,o;992<=f(window).width()&&(e=(o=f(this)).find(".profile-scroll-main"),n=o.find(".profile-scroll-jump"),o=o.find(".profile-menu"),k=o.offset().top,T(e,n))})}});function T(e,n){n.css({height:e.outerHeight(!0)})}function j(e,n){var o,t;992<=f(window).width()&&(o=x.outerHeight()+(x.offset().top-f(window).scrollTop()),t=f(window).scrollTop()+o,k<t?(e.addClass("profileScrolling"),n.css("top",o)):(e.removeClass("profileScrolling"),n.css("top",0)))}f.fn.extend({HorizontalMenu:n.init,HorizontalMenuReset:n.reset,HorizontalMenuClose:n.close,StickyBrowseMenu:o.init,CoreBrowseMenu:C.init,CoreBrowseMenuSpinStart:C.spinStart,CoreBrowseMenuSpinStop:C.spinStop,CategoryMenuDropdown:F.init,CategoryMenuToggle:_.init,StickyProfileMenu:B.init,StickyProfileMenuReset:B.reset})}(jQuery);