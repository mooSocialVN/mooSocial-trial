(function(a,g){"function"===typeof define&&define.amd?define(["jquery","mooFileUploader","mooGlobal","mooMention"],g):"object"===typeof exports?module.exports=g(require("jquery")):a.mooAttach=g()})(this,function(a,g,l,n){return{registerAttachComment:function(b,c){c="undefined"==typeof c?"":"#"+c+" ";new g.fineUploader({element:a(c+"#comment_button_attach_"+b)[0],text:{uploadButton:'<div class="comment-upload-section"><span class="post-area-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span></div>'},
validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:l.errorHandler,onSubmit:function(f,h){var d=a('<span id="attach_'+b+"_"+f+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(c+"#comment_preview_image_"+b).append(d);a(c+"#comment_button_attach_"+b).hide();a("body").trigger("onSubmitRegisterAttachCommentCallback",
[{id:b,type:c}])},onComplete:function(f,h,d,m){a(this.getItemByFileId(f)).remove();img=a('<img src="'+mooConfig.url.base+"/"+d.photo+'">');img.load(function(){var e=a("#attach_"+b+"_"+f);e.attr("style","background-image:url("+mooConfig.url.base+"/"+d.photo+")");var k=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');e.append(k);e.find(".thumb-review-delete").unbind("click");e.find(".thumb-review-delete").click(function(){e.remove();a(c+"#comment_button_attach_"+
b).show();a(c+"#comment_image_"+b).val("");a("body").trigger("onCompleteRegisterAttachCommentDeleteThumbCallback",[{id:b,type:c}])});a("body").trigger("onCompleteRegisterAttachCommentImageLoadedCallback",[{id:b,type:c}])});a(".cmt_preview_link").remove();a("#userCommentLink"+b).val("");a("#userCommentVideo"+b).val("");a("#userCommentEditLink"+b).val("");a("#userCommentEditVideo"+b).val("");a("#photoModal #photo-content").length&&(a("#photoModal #userCommentLink"+b).val(""),a("#photoModal #userCommentVideo"+
b).val(""),a("#photoModal #userCommentEditLink"+b).val(""),a("#photoModal #userCommentEditVideo"+b).val(""));a(c+"#comment_image_"+b).val(d.photo);a("body").trigger("onCompleteRegisterAttachCommentCallback",[{id:b,type:c}])}}})},registerAttachCommentEdit:function(b,c){new g.fineUploader({element:a("#"+b+"_comment_attach_"+c)[0],text:{uploadButton:'<div class="comment-upload-section"><span class="post-area-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span></div>'},validation:{allowedExtensions:mooConfig.photoExt,
sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:l.errorHandler,onSubmit:function(f,h){var d=a('<span id="attach__'+c+"_"+f+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a("#"+b+"_comment_preview_attach_"+c).append(d);a("#"+b+"_comment_attach_"+c).hide();a("body").trigger("onSubmitRegisterAttachCommentEditCallback",[{id:c,type:b}])},onComplete:function(f,
h,d,m){a(this.getItemByFileId(f)).remove();img=a('<img src="'+mooConfig.url.base+"/"+d.photo+'">');img.load(function(){var e=a("#attach__"+c+"_"+f);e.attr("style","background-image:url("+mooConfig.url.base+"/"+d.photo+")");var k=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');e.append(k);e.find(".thumb-review-delete").unbind("click");e.find(".thumb-review-delete").click(function(){e.remove();a("#"+b+"_comment_attach_"+c).show();a("#"+b+"_comment_attach_id_"+
c).val("");a("body").trigger("onCompleteRegisterAttachCommentEditDeleteThumbCallback",[{id:c,type:b}])});a("body").trigger("onCompleteRegisterAttachCommentEditImageLoadedCallback",[{id:c,type:b}])});a("#"+b+"_comment_attach_id_"+c).val(d.photo);a("#"+b+"_comment_attach_"+c).hide();a("body").trigger("onCompleteRegisterAttachCommentEditCallback",[{id:c,type:b}]);a(".cmt_preview_link").remove();a("#userCommentLink"+c).val("");a("#userCommentVideo"+c).val("");a("#userCommentEditLink"+c).val("");a("#userCommentEditVideo"+
c).val("")}}})},registerAttachCommentReplay:function(b,c){n.init("commentReplyForm"+b);c="undefined"==typeof c?"":"#"+c+" ";new g.fineUploader({element:a(c+"#comment_reply_button_attach_"+b)[0],text:{uploadButton:'<div class="comment-upload-section"><span class="post-area-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},
callbacks:{onError:l.errorHandler,onSubmit:function(f,h){var d=a('<span id="attach_'+b+"_"+f+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(c+"#comment_reply_preview_image_"+b).append(d);a(c+"#comment_reply_button_attach_"+b).hide()},onComplete:function(f,h,d,m){a(this.getItemByFileId(f)).remove();img=a('<img src="'+mooConfig.url.base+"/"+d.photo+'">');img.load(function(){var e=a("#attach_"+b+"_"+f);e.attr("style",
"background-image:url("+mooConfig.url.base+"/"+d.photo+")");var k=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');e.append(k);e.find(".thumb-review-delete").unbind("click");e.find(".thumb-review-delete").click(function(){e.remove();a(c+"#comment_reply_button_attach_"+b).show();a(c+"#comment_reply_image_"+b).val("")})});a(c+"#comment_reply_image_"+b).val(d.photo);a("#userReplyLink"+b).val("");a("#userReplyVideo"+b).val("")}}})},registerAttachActivityCommentReplay:function(b,
c){n.init("activitycommentReplyForm"+b);c="undefined"==typeof c?"":"#"+c+" ";new g.fineUploader({element:a(c+"#activitycomment_reply_button_attach_"+b)[0],text:{uploadButton:'<div class="comment-upload-section"><span class="post-area-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:l.errorHandler,onSubmit:function(f,
h){var d=a('<span id="attach_'+b+"_"+f+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(c+"#activitycomment_reply_preview_image_"+b).append(d);a(c+"#activitycomment_reply_button_attach_"+b).hide()},onComplete:function(f,h,d,m){a(this.getItemByFileId(f)).remove();img=a('<img src="'+mooConfig.url.base+"/"+d.photo+'">');img.load(function(){var e=a("#attach_"+b+"_"+f);e.attr("style","background-image:url("+mooConfig.url.base+
"/"+d.photo+")");var k=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');e.append(k);e.find(".thumb-review-delete").unbind("click");e.find(".thumb-review-delete").click(function(){e.remove();a(c+"#activitycomment_reply_button_attach_"+b).show();a(c+"#activitycomment_reply_image_"+b).val("")})});a(c+"#activitycomment_reply_image_"+b).val(d.photo);a("#userReplyLink"+b).val("");a("#userReplyVideo"+b).val("")}}})},registerAttachCommentItemReplay:function(b,
c){n.init("item_commentReplyForm"+b);c="undefined"==typeof c?"":"#"+c+" ";new g.fineUploader({element:a(c+"#item_comment_reply_button_attach_"+b)[0],text:{uploadButton:'<div class="comment-upload-section"><span class="post-area-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span></div>'},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},multiple:!1,request:{endpoint:mooConfig.url.base+"/upload/wall"},callbacks:{onError:l.errorHandler,onSubmit:function(f,
h){var d=a('<span id="attach_'+b+"_"+f+'" style="background-image:url('+mooConfig.url.base+'/img/indicator.gif);background-size:inherit;background-repeat:no-repeat"></span>');a(c+"#item_comment_reply_preview_image_"+b).append(d);a(c+"#item_comment_reply_button_attach_"+b).hide()},onComplete:function(f,h,d,m){a(this.getItemByFileId(f)).remove();img=a('<img src="'+mooConfig.url.base+"/"+d.photo+'">');img.load(function(){var e=a("#attach_"+b+"_"+f);e.attr("style","background-image:url("+mooConfig.url.base+
"/"+d.photo+")");var k=a('<a href="javascript:void(0);"><i class="material-icons thumb-review-delete">clear</i></a>');e.append(k);e.find(".thumb-review-delete").unbind("click");e.find(".thumb-review-delete").click(function(){e.remove();a(c+"#item_comment_reply_button_attach_"+b).show();a(c+"#item_comment_reply_image_"+b).val("")})});a(c+"#item_comment_reply_image_"+b).val(d.photo);a("#userReplyLink"+b).val("");a("#userReplyVideo"+b).val("")}}})}}});