(function(a,d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?module.exports=d(require("jquery")):a.mooRating=d()})(this,function(a){var d=0,h=function(a,b){a.html(b+"/"+Math.ceil(a.width()/24)+" (from "+a.attr("data-votes")+" votes)")},f=function(a,b){var c=24*a,k=b.width()-c;b.find(".rated").css({width:c+"px"});b.find(".un-rated").css({width:k+"px"});b.find(".un-rated").css({left:c+"px"})};return{init:function(g){"undefined"!==typeof g&&1==g&&(d=1,a("body").on("mouseenter",
'div[id^="stars_"]',function(b){a(this).mousemove(function(c){var b=a(this).offset(),b=c.pageX-b.left;c=a(this).data("step");b=Math.ceil(b/(24*c));0==b&&(b=1);f(b*c,a(this));c*=b;var b=a(this),e="";c>Math.ceil(b.width()/24)&&(c=Math.ceil(b.width()/24));switch(parseInt(c)){case 1:e="Very bad";break;case 2:e="Bad";break;case 3:e="Average";break;case 4:e="Good";break;case 5:e="Perfect"}b.siblings(".start-comment").html(e)})}).on("mouseleave",'div[id^="stars_"]',function(b){b=a(this).children(".rated").attr("data-score");
f(b,a(this));h(a(this).siblings(".start-comment"),b)}),a("body").on("click",'div[id^="stars_"]',function(b){b=a(this).children(".rated").width();a(this).data("step");b=Math.ceil(b/24);b>Math.ceil(a(this).width()/24)&&(b=Math.ceil(a(this).width()/24));var c=a(this),d=a(this).data("id");c.siblings(".start-comment").html("Thank you");a.post(mooConfig.url.base+"/ratings/do_rate",{params:a(this).attr("id"),score:b,uid:d},function(b){var a;try{a=JSON.parse(b)}catch(d){a=0}0!=a&&(c.children(".rated").attr("data-score",
a.score),c.siblings(".start-comment").attr("data-votes",a.votes),h(c.siblings(".start-comment"),a.score),f(a.score,c))})}))},getAllowReRating:function(){return d}}});
