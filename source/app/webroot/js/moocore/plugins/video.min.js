(function(a,c){"function"===typeof define&&define.amd?define("jquery mooAjax mooButton mooBehavior mooAlert mooPhrase mooGroup spin".split(" "),c):"object"===typeof exports?module.exports=c(require("jquery")):a.mooVideo=c()})(this,function(a,c,d,f,g,h,k){var e=function(){a(".deleteVideo").unbind("click");a(".deleteVideo").click(function(){a("#themeModal").is(":visible")&&a("#themeModal").modal("hide");var b=a(this).data();b=mooConfig.url.base+"/videos/delete/"+b.id;g.confirm(h.__("are_you_sure_you_want_to_remove_this_video"),
b)})};return{initOnCreate:function(){a("#fetchButton").unbind("click");a("#fetchButton").click(function(){a("#fetchButton").spin("small");a("#videoForm .error-message").hide();d.disableButton("fetchButton");c.post({url:mooConfig.url.base+"/videos/aj_validate",data:a("#createForm").serialize()},function(b){d.enableButton("fetchButton");b?(a("#fetchForm .error-message").html(JSON.parse(b).error),a("#fetchForm .error-message").show(),a("#fetchButton").spin(!1),a(".tip").tipsy({html:!0,gravity:"s"})):
c.post({url:mooConfig.url.base+"/videos/fetch",data:a("#createForm").serialize()},function(l){d.enableButton("fetchButton");a("#fetchButton").spin(!1).hide();a("#fetchForm").slideUp();a("#videoForm").html(l);a(".tip").tipsy({html:!0,gravity:"s"})})});return!1})},initAfterFetch:function(){a("#saveBtn").unbind("click");a("#saveBtn").click(function(){a(this).addClass("disabled");f.createItem("videos",!0)});e()},initOnView:function(){e()},initOnListing:function(){f.initMoreResults();e();a(".ajaxLoadPage").unbind("click");
a(".ajaxLoadPage").on("click",function(){var b=a(this).data();k.loadPage("videos",b.url)})}}});