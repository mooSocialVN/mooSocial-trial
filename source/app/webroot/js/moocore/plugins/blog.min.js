(function(a,e){"function"===typeof define&&define.amd?define("jquery mooFileUploader mooBehavior mooAlert mooPhrase mooUser mooOverlay mooGlobal tinyMCE".split(" "),e):"object"===typeof exports?module.exports=e(require("jquery")):a.mooBlog=e()})(this,function(a,e,m,t,f,n,u,p,g){var h=function(){a(".deleteBlog").unbind("click");a(".deleteBlog").click(function(){var b=a(this).data();b=mooConfig.url.base+"/blogs/delete/"+b.id;t.confirm(f.__("are_you_sure_you_want_to_remove_this_entry"),b)})};return{initOnCreate:function(){var b=
new e.fineUploader({element:a("#photos_upload")[0],autoUpload:!1,text:{uploadButton:'<div class="upload-section"><span class="upload-section-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span>'+f.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/blog/blog_upload/images"},callbacks:{onError:p.errorHandler,onComplete:function(d,k,c){a("#blog_photo_ids").val(a("#blog_photo_ids").val()+
","+c.photo_id);g.activeEditor.insertContent('<p align="center"><a href="'+c.large+'" class="attached-image"><img src="'+c.thumb+'"></a></p><br>')}}});a("#triggerUpload").unbind("click");a("#triggerUpload").click(function(){b.uploadStoredFiles()});a("#saveBtn").unbind("click");a("#saveBtn").click(function(){a(this).addClass("disabled");null!==g.activeEditor&&a("#editor").val(g.activeEditor.getContent());m.createItem("blogs",!0)});new e.fineUploader({element:a("#blog_thumnail")[0],multiple:!1,text:{uploadButton:'<div class="upload-section"><span class="upload-section-icon material-icons moo-icon moo-icon-photo_camera">photo_camera</span>'+
f.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/blog/blog_upload/avatar"},callbacks:{onError:p.errorHandler,onComplete:function(d,k,c){a("#blog_thumnail_preview > img").attr("src",c.thumb);a("#blog_thumnail_preview > img").show();a("#thumbnail").val(c.file)}}});h();a("#toggleUploader").unbind("click");a("#toggleUploader").on("click",function(){a("#images-uploader").slideToggle()})},
initOnView:function(){u.registerImageOverlay();h();n.initRespondRequest()},initOnEdit:function(){},initOnListing:function(){m.initMoreResults();h();a(".likeItem").unbind("click");a(".likeItem").click(function(){var b=a(this),d=a(this).data(),k=d.type,c=d.id;d=d.status;var q=!1;b.hasClass("active")&&(q=!0);b.hasClass("do_ajax")||(b.addClass("do_ajax"),a.post(mooConfig.url.base+"/likes/ajax_add/"+k+"/"+c+"/"+d,{noCache:1},function(v){try{var r=a.parseJSON(v),l=b.parents(".like-section:first");l.find(".likeCount:first").html(parseInt(r.like_count));
l.find(".dislikeCount:first").html(parseInt(r.dislike_count));l.find(".likeItem").removeClass("active");q||b.addClass("active")}catch(w){n.validateUser()}b.removeClass("do_ajax")}))})}}});