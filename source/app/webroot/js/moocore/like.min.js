!function(t,e){"function"==typeof define&&define.amd?define(["jquery","mooUser"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.mooLike=e()}(this,function(l,n){var e=function(o,i,a,s){o.hasClass("do_ajax")||(o.addClass("do_ajax"),l.post(mooConfig.url.base+"/likes/ajax_add/"+i+"/"+a+"/"+s,{noCache:1},function(t){try{var e=l.parseJSON(t);l("#like_count").html(parseInt(e.like_count)),l("#dislike_count").html(parseInt(e.dislike_count)),l("#like_count2").html(parseInt(e.like_count)),l("#dislike_count2").html(parseInt(e.dislike_count)),s?(l("#"+i+"_l_"+a).toggleClass("active"),l("#"+i+"_d_"+a).removeClass("active")):(l("#"+i+"_d_"+a).toggleClass("active"),l("#"+i+"_l_"+a).removeClass("active"))}catch(t){n.validateUser()}o.removeClass("do_ajax")}))},o=function(o,t,i){o.hasClass("do_ajax")||(o.addClass("do_ajax"),l.post(mooConfig.url.base+"/likes/ajax_add/Photo_Photo/"+t+"/"+i,{noCache:1},function(t){try{var e=l.parseJSON(t);l("#photo_like_count2").html(parseInt(e.like_count)),l("#photo_dislike_count2").html(parseInt(e.dislike_count)),i?(l("#photo_like_count").toggleClass("active"),l("#photo_dislike_count").removeClass("active")):(l("#photo_dislike_count").toggleClass("active"),l("#photo_like_count").removeClass("active"))}catch(t){n.validateUser()}o.removeClass("do_ajax")}))},i=function(o,i,a,s){var t;o.hasClass("do_ajax")||(t="photo_comment"==i?"comment":i,o.addClass("do_ajax"),l.post(mooConfig.url.base+"/likes/ajax_add/"+t+"/"+a+"/"+s,{noCache:1},function(t){try{var e=l.parseJSON(t);l("#"+i+"_like_"+a).html(parseInt(e.like_count)),l("#"+i+"_dislike_"+a).html(parseInt(e.dislike_count)),"comment"==i&&(l("#photo_comment_like_"+a).html(parseInt(e.like_count)),l("#photo_comment_dislike_"+a).html(parseInt(e.dislike_count))),s?(l("#"+i+"_l_"+a).toggleClass("active"),l("#"+i+"_d_"+a).removeClass("active"),"comment"==i&&(l("#photo_comment_l_"+a).toggleClass("active"),l("#photo_comment_d_"+a).removeClass("active"))):(l("#"+i+"_d_"+a).toggleClass("active"),l("#"+i+"_l_"+a).removeClass("active"),"comment"==i&&(l("#photo_comment_d_"+a).toggleClass("active"),l("#photo_comment_l_"+a).removeClass("active")))}catch(t){n.validateUser()}o.removeClass("do_ajax")}))};return{initLikeActivity:function(){l(".likeActivity").unbind("click"),l(".likeActivity").click(function(){var t=l(this).data();i(l(this),t.type,t.id,t.status)})},likePhoto:o,initLikeItem:function(){l(".likeItem").unbind("click"),l(".likeItem").click(function(){var t=l(this).data();e(l(this),t.type,t.id,t.status)})},initLikePhoto:function(){l(".likePhoto").unbind("click"),l(".likePhoto").on("click",function(){var t=l(this).data();o(l(this),t.id,t.thumbUp)})}}});